1. 微服务和单体的关系、理解、优缺点
   1. 易于开发、理解和维护；比单体应用启动快；局部修改很容易部署，有利于持续集成和持续交付；故障隔离，一个服务出现问题不会影响整个应用；不会受限于任何技术栈。
   2. 系统复杂性增加、系统边界扩散、难以把控
2. rocketMQ和kafka的区别
   1. 使用场景
   2. 消息发送方式（可以单条发送/堆积后发送）->影响tps
   3. 

3. jwt的理解
   1. 解释jwt
   2. jwt的优点
   3. jwt的缺点
4. 分库分表、分表时需要考虑的问题，key不在分表key中时可以采取的方案、同步传输时的数据一致性
   1. 冗余全量表或者冗余关系表（参考文章：[https://toutiao.io/posts/kvyw0j/preview](https://toutiao.io/posts/kvyw0j/preview)）
   2. ES+hbase，使用es查询出rowKey，然后在hbase中查询
   3. 不停机迁移方案（参考文章：[https://database.51cto.com/art/202012/637727.htm](https://database.51cto.com/art/202012/637727.htm)）
      1. 前期准备：canal中间件、新老库/表 数据校验脚本、代码改造（热配置，可以随时切换读流量）
      2. 首先，配置canal从老库/表中不断同步增量数据到新库/表。同时，写入的流量要始终放在老库上
      3. 运行脚本，将某个时间戳之前的老库数据同步到新库
      4. 脚本执行完成且canal稳定后，开始将读流量切到新库（这里业务要保障新库读不到要去读老库）
      5. 读流量切换完成后，将写流量切到新库，同时继续运行canal
      6. 稳定后关闭canal
      7. 在执行过程中，需要记录日志，方便数据恢复
   4. 不停机迁移方案2
      1. 上线初期.试运行阶段->改造程序发布->打开双写开关->抽样检查数据是否一致
      2. 在线数据迁移.写旧读旧->停写新库->清理旧库重复数据->建立2个DTS进行同步->进度追平->开启写新库开关->结束DTS任务->检查是否一致
      3. 迁移完成.切读切写->开启读新库开关->观察一段时间->停止旧写
      4. 数据一致性校验，采用消息队列+定时任务（10分钟之前的失败记录），读取失败记录，进行跟踪
5. 限流和熔断的理解 && 限流算法
   1. 熔断防止服务雪崩
   2. 限流用来控制服务可用
   3. 漏洞、令牌桶：其中漏桶可以控制瞬时高并发，因为消费的速率一定；令牌桶支持瞬时高并发，因为生产的速率一定。
6. 服务间调用时，如果出现了调用时间过长（10s），而服务的qps是1000时会怎么样
   1.  
7. redis做分布式锁可能导致的问题
- 问题
   - setnx和expire的非原子性
   - 超时后使用del 导致误删其他线程的锁。A线程持有锁，但是因为任务运行耗时较长，锁过期了。B线程获取到锁，B还没执行完，但是A执行完了，锁被释放掉，误删除。
   - 并发的可靠性问题
- 2、基于Redis的分布式锁框架redisson。
   - Redisson是一个企业级的开源Redis Client，也提供了分布式锁的支持。
   - 加锁机制
      - 线程去获取锁，获取成功: 执行lua脚本，保存数据到redis数据库。
      - 线程去获取锁，获取失败: 一直通过while循环尝试获取锁，获取成功后，执行lua脚本，保存数据到redis数据库。
   - watch dog自动延期机制：工作线程未完成任务，但是到了过期时间，还想延长，可以通过看门狗机制，不断延长锁的过期时间。

8. 网关层面的安全、限流等的考虑
   1. 

9. 项目遇到的事故，及解决方法
   1. 由于类继承而导致的oom问题
   2. redis连接的获取问题
10. arthas的原理
   1. Jdk5增加了一个包java.lang.instrument，提供了对Jvm底层组件的访问能力，Instrument要求在运行前利用命令行参数或者系统参数设置代理类，VM启动完成之后（绝大多数类加载前）初始化。
   2. Arthas增强功能的核心是Enhancer和AdviceWeaver这两个类，对方法进行Aop织入，达到watch，trace等效果。
   3. 

11. fastjson、log4j
   1. 

12. keepalived会导致资源浪费的回答
   1. 

13. tail？
   1. 

14. G1收集器特点：
   1. 标记-整理
   2. 后台维护了优先列表，根据允许收集的时间，优先选择价值最大的进行收集
15. 服务的qps及rt：
   1. 

